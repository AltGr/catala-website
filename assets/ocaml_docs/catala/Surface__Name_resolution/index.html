<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Surface__Name_resolution (catala.Surface__Name_resolution)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">catala</a> &#x00BB; Surface__Name_resolution</nav><h1>Module <code>Surface__Name_resolution</code></h1><p>Builds a context that allows for mapping each name to a precise uid, taking lexical scopes into account</p><nav class="toc"><ul><li><a href="#name-resolution-context">Name resolution context</a></li><li><a href="#helpers">Helpers</a></li><li><a href="#declarations-pass">Declarations pass</a></li><li><a href="#scope-uses-pass">Scope uses pass</a></li><li><a href="#api">API</a></li></ul></nav></header><div class="spec module" id="module-Pos"><a href="#module-Pos" class="anchor"></a><code><span class="keyword">module</span> Pos = <a href="../Utils/index.html#module-Pos">Utils.Pos</a></code></div><div class="spec module" id="module-Errors"><a href="#module-Errors" class="anchor"></a><code><span class="keyword">module</span> Errors = <a href="../Utils/index.html#module-Errors">Utils.Errors</a></code></div><section><header><h2 id="name-resolution-context"><a href="#name-resolution-context" class="anchor"></a>Name resolution context</h2></header><dl><dt class="spec type" id="type-ident"><a href="#type-ident" class="anchor"></a><code><span class="keyword">type</span> ident</code><code> = string</code></dt><dt class="spec type" id="type-typ"><a href="#type-typ" class="anchor"></a><code><span class="keyword">type</span> typ</code><code> = <a href="../Scopelang/Ast/index.html#type-typ">Scopelang.Ast.typ</a></code></dt><dt class="spec type" id="type-scope_context"><a href="#type-scope_context" class="anchor"></a><code><span class="keyword">type</span> scope_context</code><code> = </code><code>{</code><table class="record"><tr id="type-scope_context.var_idmap" class="anchored"><td class="def field"><a href="#type-scope_context.var_idmap" class="anchor"></a><code>var_idmap : <span><a href="../Scopelang/Ast/ScopeVar/index.html#type-t">Scopelang.Ast.ScopeVar.t</a> <a href="../Desugared__Ast/index.html#module-IdentMap">Desugared.Ast.IdentMap</a>.t</span>;</code></td><td class="doc"><p>Scope variables</p></td></tr><tr id="type-scope_context.label_idmap" class="anchored"><td class="def field"><a href="#type-scope_context.label_idmap" class="anchor"></a><code>label_idmap : <span><a href="../Desugared/Ast/RuleName/index.html#type-t">Desugared.Ast.RuleName.t</a> <a href="../Desugared__Ast/index.html#module-IdentMap">Desugared.Ast.IdentMap</a>.t</span>;</code></td></tr><tr id="type-scope_context.sub_scopes_idmap" class="anchored"><td class="def field"><a href="#type-scope_context.sub_scopes_idmap" class="anchor"></a><code>sub_scopes_idmap : <span><a href="../Scopelang/Ast/SubScopeName/index.html#type-t">Scopelang.Ast.SubScopeName.t</a> <a href="../Desugared__Ast/index.html#module-IdentMap">Desugared.Ast.IdentMap</a>.t</span>;</code></td><td class="doc"><p>Sub-scopes variables</p></td></tr><tr id="type-scope_context.sub_scopes" class="anchored"><td class="def field"><a href="#type-scope_context.sub_scopes" class="anchor"></a><code>sub_scopes : <span><a href="../Scopelang/Ast/ScopeName/index.html#type-t">Scopelang.Ast.ScopeName.t</a> <a href="../Scopelang__Ast/index.html#module-SubScopeMap">Scopelang.Ast.SubScopeMap</a>.t</span>;</code></td><td class="doc"><p>To what scope sub-scopes refer to?</p></td></tr></table><code>}</code></dt><dd><p>Inside a scope, we distinguish between the variables and the subscopes.</p></dd></dl><dl><dt class="spec type" id="type-struct_context"><a href="#type-struct_context" class="anchor"></a><code><span class="keyword">type</span> struct_context</code><code> = <span><span><a href="index.html#type-typ">typ</a> <a href="../Utils/Pos/index.html#type-marked">Pos.marked</a></span> <a href="../Scopelang__Ast/index.html#module-StructFieldMap">Scopelang.Ast.StructFieldMap</a>.t</span></code></dt><dd><p>Types of the fields of a struct</p></dd></dl><dl><dt class="spec type" id="type-enum_context"><a href="#type-enum_context" class="anchor"></a><code><span class="keyword">type</span> enum_context</code><code> = <span><span><a href="index.html#type-typ">typ</a> <a href="../Utils/Pos/index.html#type-marked">Pos.marked</a></span> <a href="../Scopelang__Ast/index.html#module-EnumConstructorMap">Scopelang.Ast.EnumConstructorMap</a>.t</span></code></dt><dd><p>Types of the payloads of the cases of an enum</p></dd></dl><dl><dt class="spec type" id="type-context"><a href="#type-context" class="anchor"></a><code><span class="keyword">type</span> context</code><code> = </code><code>{</code><table class="record"><tr id="type-context.local_var_idmap" class="anchored"><td class="def field"><a href="#type-context.local_var_idmap" class="anchor"></a><code>local_var_idmap : <span><a href="../Scopelang/Ast/Var/index.html#type-t">Scopelang.Ast.Var.t</a> <a href="../Desugared__Ast/index.html#module-IdentMap">Desugared.Ast.IdentMap</a>.t</span>;</code></td><td class="doc"><p>Inside a definition, local variables can be introduced by functions arguments or pattern matching</p></td></tr><tr id="type-context.scope_idmap" class="anchored"><td class="def field"><a href="#type-context.scope_idmap" class="anchor"></a><code>scope_idmap : <span><a href="../Scopelang/Ast/ScopeName/index.html#type-t">Scopelang.Ast.ScopeName.t</a> <a href="../Desugared__Ast/index.html#module-IdentMap">Desugared.Ast.IdentMap</a>.t</span>;</code></td><td class="doc"><p>The names of the scopes</p></td></tr><tr id="type-context.struct_idmap" class="anchored"><td class="def field"><a href="#type-context.struct_idmap" class="anchor"></a><code>struct_idmap : <span><a href="../Scopelang/Ast/StructName/index.html#type-t">Scopelang.Ast.StructName.t</a> <a href="../Desugared__Ast/index.html#module-IdentMap">Desugared.Ast.IdentMap</a>.t</span>;</code></td><td class="doc"><p>The names of the structs</p></td></tr><tr id="type-context.field_idmap" class="anchored"><td class="def field"><a href="#type-context.field_idmap" class="anchor"></a><code>field_idmap : <span><span><a href="../Scopelang/Ast/StructFieldName/index.html#type-t">Scopelang.Ast.StructFieldName.t</a> <a href="../Scopelang__Ast/index.html#module-StructMap">Scopelang.Ast.StructMap</a>.t</span> <a href="../Desugared__Ast/index.html#module-IdentMap">Desugared.Ast.IdentMap</a>.t</span>;</code></td><td class="doc"><p>The names of the struct fields. Names of fields can be shared between different structs</p></td></tr><tr id="type-context.enum_idmap" class="anchored"><td class="def field"><a href="#type-context.enum_idmap" class="anchor"></a><code>enum_idmap : <span><a href="../Scopelang/Ast/EnumName/index.html#type-t">Scopelang.Ast.EnumName.t</a> <a href="../Desugared__Ast/index.html#module-IdentMap">Desugared.Ast.IdentMap</a>.t</span>;</code></td><td class="doc"><p>The names of the enums</p></td></tr><tr id="type-context.constructor_idmap" class="anchored"><td class="def field"><a href="#type-context.constructor_idmap" class="anchor"></a><code>constructor_idmap : <span><span><a href="../Scopelang/Ast/EnumConstructor/index.html#type-t">Scopelang.Ast.EnumConstructor.t</a> <a href="../Scopelang__Ast/index.html#module-EnumMap">Scopelang.Ast.EnumMap</a>.t</span> <a href="../Desugared__Ast/index.html#module-IdentMap">Desugared.Ast.IdentMap</a>.t</span>;</code></td><td class="doc"><p>The names of the enum constructors. Constructor names can be shared between different enums</p></td></tr><tr id="type-context.scopes" class="anchored"><td class="def field"><a href="#type-context.scopes" class="anchor"></a><code>scopes : <span><a href="index.html#type-scope_context">scope_context</a> <a href="../Scopelang__Ast/index.html#module-ScopeMap">Scopelang.Ast.ScopeMap</a>.t</span>;</code></td><td class="doc"><p>For each scope, its context</p></td></tr><tr id="type-context.structs" class="anchored"><td class="def field"><a href="#type-context.structs" class="anchor"></a><code>structs : <span><a href="index.html#type-struct_context">struct_context</a> <a href="../Scopelang__Ast/index.html#module-StructMap">Scopelang.Ast.StructMap</a>.t</span>;</code></td><td class="doc"><p>For each struct, its context</p></td></tr><tr id="type-context.enums" class="anchored"><td class="def field"><a href="#type-context.enums" class="anchor"></a><code>enums : <span><a href="index.html#type-enum_context">enum_context</a> <a href="../Scopelang__Ast/index.html#module-EnumMap">Scopelang.Ast.EnumMap</a>.t</span>;</code></td><td class="doc"><p>For each enum, its context</p></td></tr><tr id="type-context.var_typs" class="anchored"><td class="def field"><a href="#type-context.var_typs" class="anchor"></a><code>var_typs : <span><span>(<span><a href="index.html#type-typ">typ</a> <a href="../Utils/Pos/index.html#type-marked">Pos.marked</a></span> * bool)</span> <a href="../Scopelang__Ast/index.html#module-ScopeVarMap">Scopelang.Ast.ScopeVarMap</a>.t</span>;</code></td><td class="doc"><p>The types of each scope variable declared</p></td></tr></table><code>}</code></dt><dd><p>Main context used throughout <a href="../Surface/Desugaring/index.html"><code>Desugaring</code></a></p></dd></dl></section><section><header><h2 id="helpers"><a href="#helpers" class="anchor"></a>Helpers</h2></header><dl><dt class="spec value" id="val-raise_unsupported_feature"><a href="#val-raise_unsupported_feature" class="anchor"></a><code><span class="keyword">val</span> raise_unsupported_feature : string <span>&#45;&gt;</span> <a href="../Utils/Pos/index.html#type-t">Pos.t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>Temporary function raising an error message saying that a feature is not supported yet</p></dd></dl><dl><dt class="spec value" id="val-raise_unknown_identifier"><a href="#val-raise_unknown_identifier" class="anchor"></a><code><span class="keyword">val</span> raise_unknown_identifier : string <span>&#45;&gt;</span> <span><a href="index.html#type-ident">ident</a> <a href="../Utils/Pos/index.html#type-marked">Pos.marked</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>Function to call whenever an identifier used somewhere has not been declared in the program previously</p></dd></dl><dl><dt class="spec value" id="val-get_var_typ"><a href="#val-get_var_typ" class="anchor"></a><code><span class="keyword">val</span> get_var_typ : <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <a href="../Scopelang/Ast/ScopeVar/index.html#type-t">Scopelang.Ast.ScopeVar.t</a> <span>&#45;&gt;</span> <span><a href="index.html#type-typ">typ</a> <a href="../Utils/Pos/index.html#type-marked">Pos.marked</a></span></code></dt><dd><p>Gets the type associated to an uid</p></dd></dl><dl><dt class="spec value" id="val-is_var_cond"><a href="#val-is_var_cond" class="anchor"></a><code><span class="keyword">val</span> is_var_cond : <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <a href="../Scopelang/Ast/ScopeVar/index.html#type-t">Scopelang.Ast.ScopeVar.t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-get_var_uid"><a href="#val-get_var_uid" class="anchor"></a><code><span class="keyword">val</span> get_var_uid : <a href="../Scopelang/Ast/ScopeName/index.html#type-t">Scopelang.Ast.ScopeName.t</a> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <span><a href="index.html#type-ident">ident</a> <a href="../Utils/Pos/index.html#type-marked">Pos.marked</a></span> <span>&#45;&gt;</span> <a href="../Scopelang/Ast/ScopeVar/index.html#type-t">Scopelang.Ast.ScopeVar.t</a></code></dt><dd><p>Get the variable uid inside the scope given in argument</p></dd></dl><dl><dt class="spec value" id="val-get_subscope_uid"><a href="#val-get_subscope_uid" class="anchor"></a><code><span class="keyword">val</span> get_subscope_uid : <a href="../Scopelang/Ast/ScopeName/index.html#type-t">Scopelang.Ast.ScopeName.t</a> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <span><a href="index.html#type-ident">ident</a> <a href="../Utils/Pos/index.html#type-marked">Pos.marked</a></span> <span>&#45;&gt;</span> <a href="../Scopelang/Ast/SubScopeName/index.html#type-t">Scopelang.Ast.SubScopeName.t</a></code></dt><dd><p>Get the subscope uid inside the scope given in argument</p></dd></dl><dl><dt class="spec value" id="val-is_subscope_uid"><a href="#val-is_subscope_uid" class="anchor"></a><code><span class="keyword">val</span> is_subscope_uid : <a href="../Scopelang/Ast/ScopeName/index.html#type-t">Scopelang.Ast.ScopeName.t</a> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <a href="index.html#type-ident">ident</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>is_subscope_uid scope_uid ctxt y</code> returns true if <code>y</code> belongs to the subscopes of <code>scope_uid</code>.</p></dd></dl><dl><dt class="spec value" id="val-belongs_to"><a href="#val-belongs_to" class="anchor"></a><code><span class="keyword">val</span> belongs_to : <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <a href="../Scopelang/Ast/ScopeVar/index.html#type-t">Scopelang.Ast.ScopeVar.t</a> <span>&#45;&gt;</span> <a href="../Scopelang/Ast/ScopeName/index.html#type-t">Scopelang.Ast.ScopeName.t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p>Checks if the var_uid belongs to the scope scope_uid</p></dd></dl><dl><dt class="spec value" id="val-get_def_typ"><a href="#val-get_def_typ" class="anchor"></a><code><span class="keyword">val</span> get_def_typ : <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <a href="../Desugared/Ast/ScopeDef/index.html#type-t">Desugared.Ast.ScopeDef.t</a> <span>&#45;&gt;</span> <span><a href="index.html#type-typ">typ</a> <a href="../Utils/Pos/index.html#type-marked">Pos.marked</a></span></code></dt><dd><p>Retrieves the type of a scope definition from the context</p></dd></dl><dl><dt class="spec value" id="val-is_def_cond"><a href="#val-is_def_cond" class="anchor"></a><code><span class="keyword">val</span> is_def_cond : <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <a href="../Desugared/Ast/ScopeDef/index.html#type-t">Desugared.Ast.ScopeDef.t</a> <span>&#45;&gt;</span> bool</code></dt></dl></section><section><header><h2 id="declarations-pass"><a href="#declarations-pass" class="anchor"></a>Declarations pass</h2></header><dl><dt class="spec value" id="val-process_subscope_decl"><a href="#val-process_subscope_decl" class="anchor"></a><code><span class="keyword">val</span> process_subscope_decl : <a href="../Scopelang/Ast/ScopeName/index.html#type-t">Scopelang.Ast.ScopeName.t</a> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <a href="../Surface/Ast/index.html#type-scope_decl_context_scope">Surface.Ast.scope_decl_context_scope</a> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a></code></dt><dd><p>Process a subscope declaration</p></dd></dl><dl><dt class="spec value" id="val-is_type_cond"><a href="#val-is_type_cond" class="anchor"></a><code><span class="keyword">val</span> is_type_cond : <span><a href="../Surface/Ast/index.html#type-typ">Surface.Ast.typ</a> <a href="../Utils/Pos/index.html#type-marked">Pos.marked</a></span> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-process_base_typ"><a href="#val-process_base_typ" class="anchor"></a><code><span class="keyword">val</span> process_base_typ : <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <span><a href="../Surface/Ast/index.html#type-base_typ">Surface.Ast.base_typ</a> <a href="../Utils/Pos/index.html#type-marked">Pos.marked</a></span> <span>&#45;&gt;</span> <span><a href="../Scopelang/Ast/index.html#type-typ">Scopelang.Ast.typ</a> <a href="../Utils/Pos/index.html#type-marked">Pos.marked</a></span></code></dt><dd><p>Process a basic type (all types except function types)</p></dd></dl><dl><dt class="spec value" id="val-process_type"><a href="#val-process_type" class="anchor"></a><code><span class="keyword">val</span> process_type : <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <span><a href="../Surface/Ast/index.html#type-typ">Surface.Ast.typ</a> <a href="../Utils/Pos/index.html#type-marked">Pos.marked</a></span> <span>&#45;&gt;</span> <span><a href="../Scopelang/Ast/index.html#type-typ">Scopelang.Ast.typ</a> <a href="../Utils/Pos/index.html#type-marked">Pos.marked</a></span></code></dt><dd><p>Process a type (function or not)</p></dd></dl><dl><dt class="spec value" id="val-process_data_decl"><a href="#val-process_data_decl" class="anchor"></a><code><span class="keyword">val</span> process_data_decl : <a href="../Scopelang/Ast/ScopeName/index.html#type-t">Scopelang.Ast.ScopeName.t</a> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <a href="../Surface/Ast/index.html#type-scope_decl_context_data">Surface.Ast.scope_decl_context_data</a> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a></code></dt><dd><p>Process data declaration</p></dd></dl><dl><dt class="spec value" id="val-process_item_decl"><a href="#val-process_item_decl" class="anchor"></a><code><span class="keyword">val</span> process_item_decl : <a href="../Scopelang/Ast/ScopeName/index.html#type-t">Scopelang.Ast.ScopeName.t</a> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <a href="../Surface/Ast/index.html#type-scope_decl_context_item">Surface.Ast.scope_decl_context_item</a> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a></code></dt><dd><p>Process an item declaration</p></dd></dl><dl><dt class="spec value" id="val-add_def_local_var"><a href="#val-add_def_local_var" class="anchor"></a><code><span class="keyword">val</span> add_def_local_var : <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <span><a href="index.html#type-ident">ident</a> <a href="../Utils/Pos/index.html#type-marked">Pos.marked</a></span> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a> * <a href="../Scopelang/Ast/Var/index.html#type-t">Scopelang.Ast.Var.t</a></code></dt><dd><p>Adds a binding to the context</p></dd></dl><dl><dt class="spec value" id="val-process_scope_decl"><a href="#val-process_scope_decl" class="anchor"></a><code><span class="keyword">val</span> process_scope_decl : <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <a href="../Surface/Ast/index.html#type-scope_decl">Surface.Ast.scope_decl</a> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a></code></dt><dd><p>Process a scope declaration</p></dd></dl><dl><dt class="spec value" id="val-process_struct_decl"><a href="#val-process_struct_decl" class="anchor"></a><code><span class="keyword">val</span> process_struct_decl : <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <a href="../Surface/Ast/index.html#type-struct_decl">Surface.Ast.struct_decl</a> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a></code></dt><dd><p>Process a struct declaration</p></dd></dl><dl><dt class="spec value" id="val-process_enum_decl"><a href="#val-process_enum_decl" class="anchor"></a><code><span class="keyword">val</span> process_enum_decl : <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <a href="../Surface/Ast/index.html#type-enum_decl">Surface.Ast.enum_decl</a> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a></code></dt><dd><p>Process an enum declaration</p></dd></dl><dl><dt class="spec value" id="val-process_decl_item"><a href="#val-process_decl_item" class="anchor"></a><code><span class="keyword">val</span> process_decl_item : <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <span><a href="../Surface/Ast/index.html#type-code_item">Surface.Ast.code_item</a> <a href="../Utils/Pos/index.html#type-marked">Pos.marked</a></span> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a></code></dt><dd><p>Process a code item that is a declaration</p></dd></dl><dl><dt class="spec value" id="val-process_code_block"><a href="#val-process_code_block" class="anchor"></a><code><span class="keyword">val</span> process_code_block : <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <a href="../Surface/Ast/index.html#type-code_block">Surface.Ast.code_block</a> <span>&#45;&gt;</span> <span>(<a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <span><a href="../Surface/Ast/index.html#type-code_item">Surface.Ast.code_item</a> <a href="../Utils/Pos/index.html#type-marked">Pos.marked</a></span> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a>)</span> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a></code></dt><dd><p>Process a code block</p></dd></dl><dl><dt class="spec value" id="val-process_law_article_item"><a href="#val-process_law_article_item" class="anchor"></a><code><span class="keyword">val</span> process_law_article_item : <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <a href="../Surface/Ast/index.html#type-law_article_item">Surface.Ast.law_article_item</a> <span>&#45;&gt;</span> <span>(<a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <span><a href="../Surface/Ast/index.html#type-code_item">Surface.Ast.code_item</a> <a href="../Utils/Pos/index.html#type-marked">Pos.marked</a></span> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a>)</span> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a></code></dt><dd><p>Process a law article item, only considering the code blocks</p></dd></dl><dl><dt class="spec value" id="val-process_law_structure"><a href="#val-process_law_structure" class="anchor"></a><code><span class="keyword">val</span> process_law_structure : <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <a href="../Surface/Ast/index.html#type-law_structure">Surface.Ast.law_structure</a> <span>&#45;&gt;</span> <span>(<a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <span><a href="../Surface/Ast/index.html#type-code_item">Surface.Ast.code_item</a> <a href="../Utils/Pos/index.html#type-marked">Pos.marked</a></span> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a>)</span> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a></code></dt><dd><p>Process a law structure, only considering the code blocks</p></dd></dl><dl><dt class="spec value" id="val-process_program_item"><a href="#val-process_program_item" class="anchor"></a><code><span class="keyword">val</span> process_program_item : <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <a href="../Surface/Ast/index.html#type-program_item">Surface.Ast.program_item</a> <span>&#45;&gt;</span> <span>(<a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <span><a href="../Surface/Ast/index.html#type-code_item">Surface.Ast.code_item</a> <a href="../Utils/Pos/index.html#type-marked">Pos.marked</a></span> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a>)</span> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a></code></dt><dd><p>Process a program item, only considering the code blocks</p></dd></dl></section><section><header><h2 id="scope-uses-pass"><a href="#scope-uses-pass" class="anchor"></a>Scope uses pass</h2></header><dl><dt class="spec value" id="val-process_rule"><a href="#val-process_rule" class="anchor"></a><code><span class="keyword">val</span> process_rule : <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <a href="../Scopelang/Ast/ScopeName/index.html#type-t">Scopelang.Ast.ScopeName.t</a> <span>&#45;&gt;</span> <a href="../Surface/Ast/index.html#type-rule">Surface.Ast.rule</a> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a></code></dt><dt class="spec value" id="val-process_definition"><a href="#val-process_definition" class="anchor"></a><code><span class="keyword">val</span> process_definition : <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <a href="../Scopelang/Ast/ScopeName/index.html#type-t">Scopelang.Ast.ScopeName.t</a> <span>&#45;&gt;</span> <a href="../Surface/Ast/index.html#type-definition">Surface.Ast.definition</a> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a></code></dt><dt class="spec value" id="val-process_scope_use_item"><a href="#val-process_scope_use_item" class="anchor"></a><code><span class="keyword">val</span> process_scope_use_item : <a href="../Scopelang/Ast/ScopeName/index.html#type-t">Scopelang.Ast.ScopeName.t</a> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <span><a href="../Surface/Ast/index.html#type-scope_use_item">Surface.Ast.scope_use_item</a> <a href="../Utils/Pos/index.html#type-marked">Pos.marked</a></span> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a></code></dt><dt class="spec value" id="val-process_scope_use"><a href="#val-process_scope_use" class="anchor"></a><code><span class="keyword">val</span> process_scope_use : <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <a href="../Surface/Ast/index.html#type-scope_use">Surface.Ast.scope_use</a> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a></code></dt><dt class="spec value" id="val-process_use_item"><a href="#val-process_use_item" class="anchor"></a><code><span class="keyword">val</span> process_use_item : <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <span><a href="../Surface/Ast/index.html#type-code_item">Surface.Ast.code_item</a> <a href="../Utils/Pos/index.html#type-marked">Pos.marked</a></span> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a></code></dt></dl></section><section><header><h2 id="api"><a href="#api" class="anchor"></a>API</h2></header><dl><dt class="spec value" id="val-form_context"><a href="#val-form_context" class="anchor"></a><code><span class="keyword">val</span> form_context : <a href="../Surface/Ast/index.html#type-program">Surface.Ast.program</a> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a></code></dt><dd><p>Derive the context from metadata, in one pass over the declarations</p></dd></dl></section></div></body></html>