<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Context (catala.Catala.Context)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">catala</a> &#x00BB; <a href="../index.html">Catala</a> &#x00BB; Context</nav><h1>Module <code>Catala.Context</code></h1></header><dl><dt class="spec type" id="type-uid"><a href="#type-uid" class="anchor"></a><code><span class="keyword">type</span> uid</code><code> = <a href="../Uid/index.html#type-t">Uid.t</a></code></dt><dt class="spec type" id="type-scope_uid"><a href="#type-scope_uid" class="anchor"></a><code><span class="keyword">type</span> scope_uid</code><code> = <a href="../Uid/index.html#type-t">Uid.t</a></code></dt><dt class="spec type" id="type-var_uid"><a href="#type-var_uid" class="anchor"></a><code><span class="keyword">type</span> var_uid</code><code> = <a href="../Uid/index.html#type-t">Uid.t</a></code></dt><dt class="spec type" id="type-sub_scope_uid"><a href="#type-sub_scope_uid" class="anchor"></a><code><span class="keyword">type</span> sub_scope_uid</code><code> = <a href="../Uid/index.html#type-t">Uid.t</a></code></dt></dl><div class="spec module" id="module-UidMap"><a href="#module-UidMap" class="anchor"></a><code><span class="keyword">module</span> UidMap = <a href="../Uid/index.html#module-UidMap">Uid.UidMap</a></code></div><div class="spec module" id="module-UidSet"><a href="#module-UidSet" class="anchor"></a><code><span class="keyword">module</span> UidSet = <a href="../Uid/index.html#module-UidSet">Uid.UidSet</a></code></div><dl><dt class="spec type" id="type-ident"><a href="#type-ident" class="anchor"></a><code><span class="keyword">type</span> ident</code><code> = string</code></dt></dl><div class="spec module" id="module-IdentMap"><a href="#module-IdentMap" class="anchor"></a><code><span class="keyword">module</span> <a href="IdentMap/index.html">IdentMap</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec type" id="type-typ"><a href="#type-typ" class="anchor"></a><code><span class="keyword">type</span> typ</code><code> = <a href="../Lambda/index.html#type-typ">Lambda.typ</a></code></dt><dt class="spec type" id="type-sort"><a href="#type-sort" class="anchor"></a><code><span class="keyword">type</span> sort</code><code> = </code><table class="variant"><tr id="type-sort.IdScope" class="anchored"><td class="def constructor"><a href="#type-sort.IdScope" class="anchor"></a><code>| </code><code><span class="constructor">IdScope</span></code></td></tr><tr id="type-sort.IdScopeVar" class="anchored"><td class="def constructor"><a href="#type-sort.IdScopeVar" class="anchor"></a><code>| </code><code><span class="constructor">IdScopeVar</span> <span class="keyword">of</span> <span><a href="index.html#type-uid">uid</a> option</span></code></td></tr><tr id="type-sort.IdSubScope" class="anchored"><td class="def constructor"><a href="#type-sort.IdSubScope" class="anchor"></a><code>| </code><code><span class="constructor">IdSubScope</span> <span class="keyword">of</span> <a href="index.html#type-uid">uid</a></code></td></tr><tr id="type-sort.IdSubScopeVar" class="anchored"><td class="def constructor"><a href="#type-sort.IdSubScopeVar" class="anchor"></a><code>| </code><code><span class="constructor">IdSubScopeVar</span> <span class="keyword">of</span> <a href="index.html#type-var_uid">var_uid</a> * <a href="index.html#type-sub_scope_uid">sub_scope_uid</a></code></td></tr><tr id="type-sort.IdBinder" class="anchored"><td class="def constructor"><a href="#type-sort.IdBinder" class="anchor"></a><code>| </code><code><span class="constructor">IdBinder</span></code></td></tr></table></dt><dt class="spec type" id="type-uid_data"><a href="#type-uid_data" class="anchor"></a><code><span class="keyword">type</span> uid_data</code><code> = </code><code>{</code><table class="record"><tr id="type-uid_data.uid_typ" class="anchored"><td class="def field"><a href="#type-uid_data.uid_typ" class="anchor"></a><code>uid_typ : <a href="index.html#type-typ">typ</a>;</code></td></tr><tr id="type-uid_data.uid_sort" class="anchored"><td class="def field"><a href="#type-uid_data.uid_sort" class="anchor"></a><code>uid_sort : <a href="index.html#type-sort">sort</a>;</code></td></tr></table><code>}</code></dt><dt class="spec type" id="type-scope_context"><a href="#type-scope_context" class="anchor"></a><code><span class="keyword">type</span> scope_context</code><code> = </code><code>{</code><table class="record"><tr id="type-scope_context.var_id_to_uid" class="anchored"><td class="def field"><a href="#type-scope_context.var_id_to_uid" class="anchor"></a><code>var_id_to_uid : <span><a href="index.html#type-uid">uid</a> <a href="IdentMap/index.html#type-t">IdentMap.t</a></span>;</code></td></tr><tr id="type-scope_context.uid_set" class="anchored"><td class="def field"><a href="#type-scope_context.uid_set" class="anchor"></a><code>uid_set : <a href="../../Catala__Uid/UidSet/index.html#type-t">UidSet.t</a>;</code></td></tr></table><code>}</code></dt><dt class="spec type" id="type-context"><a href="#type-context" class="anchor"></a><code><span class="keyword">type</span> context</code><code> = </code><code>{</code><table class="record"><tr id="type-context.scope_id_to_uid" class="anchored"><td class="def field"><a href="#type-context.scope_id_to_uid" class="anchor"></a><code>scope_id_to_uid : <span><a href="index.html#type-uid">uid</a> <a href="IdentMap/index.html#type-t">IdentMap.t</a></span>;</code></td></tr><tr id="type-context.scopes" class="anchored"><td class="def field"><a href="#type-context.scopes" class="anchor"></a><code>scopes : <span><a href="index.html#type-scope_context">scope_context</a> <a href="../../Catala__Uid/UidMap/index.html#type-t">UidMap.t</a></span>;</code></td></tr><tr id="type-context.data" class="anchored"><td class="def field"><a href="#type-context.data" class="anchor"></a><code>data : <span><a href="index.html#type-uid_data">uid_data</a> <a href="../../Catala__Uid/UidMap/index.html#type-t">UidMap.t</a></span>;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-subscope_ident"><a href="#val-subscope_ident" class="anchor"></a><code><span class="keyword">val</span> subscope_ident : string <span>&#45;&gt;</span> string <span>&#45;&gt;</span> string</code></dt><dt class="spec value" id="val-raise_unsupported_feature"><a href="#val-raise_unsupported_feature" class="anchor"></a><code><span class="keyword">val</span> raise_unsupported_feature : string <span>&#45;&gt;</span> <a href="../Pos/index.html#type-t">Pos.t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-raise_undefined_identifier"><a href="#val-raise_undefined_identifier" class="anchor"></a><code><span class="keyword">val</span> raise_undefined_identifier : string <span>&#45;&gt;</span> <a href="../Pos/index.html#type-t">Pos.t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-raise_unknown_identifier"><a href="#val-raise_unknown_identifier" class="anchor"></a><code><span class="keyword">val</span> raise_unknown_identifier : string <span>&#45;&gt;</span> <a href="../Pos/index.html#type-t">Pos.t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-get_uid_typ"><a href="#val-get_uid_typ" class="anchor"></a><code><span class="keyword">val</span> get_uid_typ : <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <a href="index.html#type-uid">uid</a> <span>&#45;&gt;</span> <a href="index.html#type-typ">typ</a></code></dt><dd><p>Get the type associated to an uid</p></dd></dl><dl><dt class="spec value" id="val-get_uid_sort"><a href="#val-get_uid_sort" class="anchor"></a><code><span class="keyword">val</span> get_uid_sort : <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <a href="index.html#type-uid">uid</a> <span>&#45;&gt;</span> <a href="index.html#type-sort">sort</a></code></dt><dd><p>Get the sort associated to an uid</p></dd></dl><dl><dt class="spec value" id="val-process_subscope_decl"><a href="#val-process_subscope_decl" class="anchor"></a><code><span class="keyword">val</span> process_subscope_decl : <a href="index.html#type-uid">uid</a> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <a href="../Ast/index.html#type-scope_decl_context_scope">Ast.scope_decl_context_scope</a> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a></code></dt><dd><p>Process a subscope declaration</p></dd></dl><dl><dt class="spec value" id="val-process_base_typ"><a href="#val-process_base_typ" class="anchor"></a><code><span class="keyword">val</span> process_base_typ : <span><a href="../Ast/index.html#type-base_typ">Ast.base_typ</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> <span>&#45;&gt;</span> <a href="../Lambda/index.html#type-typ">Lambda.typ</a></code></dt><dt class="spec value" id="val-process_type"><a href="#val-process_type" class="anchor"></a><code><span class="keyword">val</span> process_type : <span><a href="../Ast/index.html#type-typ">Ast.typ</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> <span>&#45;&gt;</span> <a href="../Lambda/index.html#type-typ">Lambda.typ</a></code></dt><dt class="spec value" id="val-process_data_decl"><a href="#val-process_data_decl" class="anchor"></a><code><span class="keyword">val</span> process_data_decl : <a href="index.html#type-uid">uid</a> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <a href="../Ast/index.html#type-scope_decl_context_data">Ast.scope_decl_context_data</a> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a></code></dt><dd><p>Process data declaration</p></dd></dl><dl><dt class="spec value" id="val-process_item_decl"><a href="#val-process_item_decl" class="anchor"></a><code><span class="keyword">val</span> process_item_decl : <a href="index.html#type-uid">uid</a> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <a href="../Ast/index.html#type-scope_decl_context_item">Ast.scope_decl_context_item</a> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a></code></dt><dd><p>Process an item declaration</p></dd></dl><dl><dt class="spec value" id="val-process_scope_decl"><a href="#val-process_scope_decl" class="anchor"></a><code><span class="keyword">val</span> process_scope_decl : <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <a href="../Ast/index.html#type-scope_decl">Ast.scope_decl</a> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a></code></dt><dd><p>Process a scope declaration</p></dd></dl><dl><dt class="spec value" id="val-process_code_item"><a href="#val-process_code_item" class="anchor"></a><code><span class="keyword">val</span> process_code_item : <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <a href="../Ast/index.html#type-code_item">Ast.code_item</a> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a></code></dt><dd><p>Process a code item : for now it only handles scope decls</p></dd></dl><dl><dt class="spec value" id="val-process_code_block"><a href="#val-process_code_block" class="anchor"></a><code><span class="keyword">val</span> process_code_block : <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <a href="../Ast/index.html#type-code_block">Ast.code_block</a> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a></code></dt><dd><p>Process a code block</p></dd></dl><dl><dt class="spec value" id="val-process_program_item"><a href="#val-process_program_item" class="anchor"></a><code><span class="keyword">val</span> process_program_item : <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <a href="../Ast/index.html#type-program_item">Ast.program_item</a> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a></code></dt><dd><p>Process a program item</p></dd></dl><dl><dt class="spec value" id="val-form_context"><a href="#val-form_context" class="anchor"></a><code><span class="keyword">val</span> form_context : <a href="../Ast/index.html#type-program">Ast.program</a> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a></code></dt><dd><p>Derive the context from metadata</p></dd></dl><dl><dt class="spec value" id="val-get_var_uid"><a href="#val-get_var_uid" class="anchor"></a><code><span class="keyword">val</span> get_var_uid : <a href="index.html#type-uid">uid</a> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <span><a href="index.html#type-ident">ident</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> <span>&#45;&gt;</span> <a href="index.html#type-uid">uid</a></code></dt><dd><p>Get the variable uid inside the scope given in argument</p></dd></dl><dl><dt class="spec value" id="val-get_subscope_uid"><a href="#val-get_subscope_uid" class="anchor"></a><code><span class="keyword">val</span> get_subscope_uid : <a href="index.html#type-uid">uid</a> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <span><a href="index.html#type-ident">ident</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> <span>&#45;&gt;</span> <a href="index.html#type-uid">uid</a> * <a href="index.html#type-uid">uid</a></code></dt><dd><p>Get the subscope uid inside the scope given in argument</p></dd></dl><dl><dt class="spec value" id="val-belongs_to"><a href="#val-belongs_to" class="anchor"></a><code><span class="keyword">val</span> belongs_to : <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <a href="index.html#type-var_uid">var_uid</a> <span>&#45;&gt;</span> <a href="index.html#type-scope_uid">scope_uid</a> <span>&#45;&gt;</span> bool</code></dt><dd><p>Checks if the var_uid belongs to the scope scope_uid</p></dd></dl><dl><dt class="spec value" id="val-add_binding"><a href="#val-add_binding" class="anchor"></a><code><span class="keyword">val</span> add_binding : <a href="index.html#type-context">context</a> <span>&#45;&gt;</span> <a href="../Uid/index.html#type-t">Uid.t</a> <span>&#45;&gt;</span> <a href="../Uid/index.html#type-t">Uid.t</a> <span>&#45;&gt;</span> <span><span><a href="index.html#type-ident">ident</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> option</span> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a> * <span><a href="../Uid/index.html#type-t">Uid.t</a> option</span></code></dt><dd><p>Adds a binding to the context</p></dd></dl></div></body></html>