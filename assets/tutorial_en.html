<head>
<style>
.catala-code .hll { background-color: #ffffcc }
.catala-code  { background: #ffffff; }
.catala-code .c { color: #888888 } /* Comment */
.catala-code .err { color: #FF0000; background-color: #FFAAAA } /* Error */
.catala-code .k { color: #008800; font-weight: bold } /* Keyword */
.catala-code .o { color: #333333 } /* Operator */
.catala-code .ch { color: #888888 } /* Comment.Hashbang */
.catala-code .cm { color: #888888 } /* Comment.Multiline */
.catala-code .cp { color: #557799 } /* Comment.Preproc */
.catala-code .cpf { color: #888888 } /* Comment.PreprocFile */
.catala-code .c1 { color: #888888 } /* Comment.Single */
.catala-code .cs { color: #cc0000; font-weight: bold } /* Comment.Special */
.catala-code .gd { color: #A00000 } /* Generic.Deleted */
.catala-code .ge { font-style: italic } /* Generic.Emph */
.catala-code .gr { color: #FF0000 } /* Generic.Error */
.catala-code .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.catala-code .gi { color: #00A000 } /* Generic.Inserted */
.catala-code .go { color: #888888 } /* Generic.Output */
.catala-code .gp { color: #c65d09; font-weight: bold } /* Generic.Prompt */
.catala-code .gs { font-weight: bold } /* Generic.Strong */
.catala-code .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.catala-code .gt { color: #0044DD } /* Generic.Traceback */
.catala-code .kc { color: #008800; font-weight: bold } /* Keyword.Constant */
.catala-code .kd { color: #008800; font-weight: bold } /* Keyword.Declaration */
.catala-code .kn { color: #008800; font-weight: bold } /* Keyword.Namespace */
.catala-code .kp { color: #003388; font-weight: bold } /* Keyword.Pseudo */
.catala-code .kr { color: #008800; font-weight: bold } /* Keyword.Reserved */
.catala-code .kt { color: #333399; font-weight: bold } /* Keyword.Type */
.catala-code .m { color: #6600EE; font-weight: bold } /* Literal.Number */
.catala-code .s { background-color: #fff0f0 } /* Literal.String */
.catala-code .na { color: #0000CC } /* Name.Attribute */
.catala-code .nb { color: #007020 } /* Name.Builtin */
.catala-code .nc { color: #BB0066; font-weight: bold } /* Name.Class */
.catala-code .no { color: #003366; font-weight: bold } /* Name.Constant */
.catala-code .nd { color: #555555; font-weight: bold } /* Name.Decorator */
.catala-code .ni { color: #880000; font-weight: bold } /* Name.Entity */
.catala-code .ne { color: #FF0000; font-weight: bold } /* Name.Exception */
.catala-code .nf { color: #0066BB; font-weight: bold } /* Name.Function */
.catala-code .nl { color: #997700; font-weight: bold } /* Name.Label */
.catala-code .nn { color: #0e84b5; font-weight: bold } /* Name.Namespace */
.catala-code .nt { color: #007700 } /* Name.Tag */
.catala-code .nv { color: #996633 } /* Name.Variable */
.catala-code .ow { color: #000000; font-weight: bold } /* Operator.Word */
.catala-code .w { color: #bbbbbb } /* Text.Whitespace */
.catala-code .mb { color: #6600EE; font-weight: bold } /* Literal.Number.Bin */
.catala-code .mf { color: #6600EE; font-weight: bold } /* Literal.Number.Float */
.catala-code .mh { color: #005588; font-weight: bold } /* Literal.Number.Hex */
.catala-code .mi { color: #0000DD; font-weight: bold } /* Literal.Number.Integer */
.catala-code .mo { color: #4400EE; font-weight: bold } /* Literal.Number.Oct */
.catala-code .sa { background-color: #fff0f0 } /* Literal.String.Affix */
.catala-code .sb { background-color: #fff0f0 } /* Literal.String.Backtick */
.catala-code .sc { color: #0044DD } /* Literal.String.Char */
.catala-code .dl { background-color: #fff0f0 } /* Literal.String.Delimiter */
.catala-code .sd { color: #DD4422 } /* Literal.String.Doc */
.catala-code .s2 { background-color: #fff0f0 } /* Literal.String.Double */
.catala-code .se { color: #666666; font-weight: bold; background-color: #fff0f0 } /* Literal.String.Escape */
.catala-code .sh { background-color: #fff0f0 } /* Literal.String.Heredoc */
.catala-code .si { background-color: #eeeeee } /* Literal.String.Interpol */
.catala-code .sx { color: #DD2200; background-color: #fff0f0 } /* Literal.String.Other */
.catala-code .sr { color: #000000; background-color: #fff0ff } /* Literal.String.Regex */
.catala-code .s1 { background-color: #fff0f0 } /* Literal.String.Single */
.catala-code .ss { color: #AA6600 } /* Literal.String.Symbol */
.catala-code .bp { color: #007020 } /* Name.Builtin.Pseudo */
.catala-code .fm { color: #0066BB; font-weight: bold } /* Name.Function.Magic */
.catala-code .vc { color: #336699 } /* Name.Variable.Class */
.catala-code .vg { color: #dd7700; font-weight: bold } /* Name.Variable.Global */
.catala-code .vi { color: #3333BB } /* Name.Variable.Instance */
.catala-code .vm { color: #996633 } /* Name.Variable.Magic */
.catala-code .il { color: #0000DD; font-weight: bold } /* Literal.Number.Integer.Long */

</style>
<meta http-equiv='Content-Type' content='text/html; charset=utf-8'/>
</head>
<h1>Legislative text implementation<br />
<small>Document generated by Catala version 0.1.1</small>
</h1>
<p>
Source files weaved in this document
</p>
<ul>
<li><tt>tutorial_en.catala</tt>, last modification 2020-05-29, 10:52</li>
</ul>
<h2 class='law-heading'>The Catala language tutorial</h2>

<p class='law-text'>Welcome to this tutorial, whose objective is to guide you through the features of the Catala language and trach you how to annotate a legislative text using the language. This document is addressed primarily to developers or people that have a programming background. It will use terms and jargon that might be unintelligible for lawyers in general.</p>

<h3 class='law-heading'>Literate programming</h3>

<p class='law-text'>To begin writing a Catala program, you must start from the text of the legislative source that will justify the code that you will write. Concretely, that means copy-pasting the text of the law into a Catala source file and formatting it according so that Catala can understand it.</p>

<p class='law-text'>You can write any kind of plain text in Catala, and it will be printed as is in PDF or HTML output. Keep in mind however that one line in the source file corresponds to a paragraph in the output. Catala allows you to declare section or subsection headers as it is done here, but the fundamental division unit is the article. Let's analyse a fictional example that defines an income tax.</p>

<div class='article-container'>

<div class='article-title'><a href='#'>Article 1</a></div>

<p class='law-text'>The income tax for an individual is defined as a fixed percentage of the individual's income over a year.</p>

<div class='code-wrapper'>
<div class='filename'>tutorial_en.catala</div>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><a href="#tutorial_en.catala-13">13</a>
<a href="#tutorial_en.catala-14">14</a>
<a href="#tutorial_en.catala-15">15</a></pre></div></td><td class="code"><div class="highlight"><pre><span></span><a name="tutorial_en.catala-13"></a>/*<span class="c1"></span>
<a name="tutorial_en.catala-14"></a><span class="c1"># This is a placeholder comment, the code for that article should go here</span>
<a name="tutorial_en.catala-15"></a>*/
</pre></div>
</td></tr></table>
</div>

<p class='law-text'>We will now proceed to encode the algorithmic content of this article using the Catala language. To do that, we will intertwine short snippets of code between the sentences of the legislative text. Each snippet of code should be as short as possible and as close as possible to the actual sentence that justifies the code.</p>

<!-- Closing article div -->
</div>

<h3 class='law-heading'>Defining a fictional income tax</h3>

<p class='law-text'>The content of article 1 uses a lot of implicit context : there exists an individual with an income, as well as an income tax that the individual has to pay each year. Even if this implicit context is not verbatim in the law, we have to explicit it for programming purposes. Concretely, we need a "metadata" section that defines the shape and types of the data used inside the law.</p>

<p class='law-text'>Let's start our metadata section by declaring the type information for the individual and the income tax computation:</p>

<div class='code-wrapper'>
<div class='filename'>tutorial_en.catala</div>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><a href="#tutorial_en.catala-26">26</a>
<a href="#tutorial_en.catala-27">27</a>
<a href="#tutorial_en.catala-28">28</a>
<a href="#tutorial_en.catala-29">29</a>
<a href="#tutorial_en.catala-30">30</a>
<a href="#tutorial_en.catala-31">31</a>
<a href="#tutorial_en.catala-32">32</a>
<a href="#tutorial_en.catala-33">33</a></pre></div></td><td class="code"><div class="highlight"><pre><span></span><a name="tutorial_en.catala-26"></a>/*
<a name="tutorial_en.catala-27"></a><span class="kd">declaration</span> <span class="kd">structure</span> <span class="nc">Individual</span><span class="o">:</span>
<a name="tutorial_en.catala-28"></a>  <span class="kd">data</span> <span class="nv">income</span> <span class="kd">content</span> <span class="kt">amount</span>
<a name="tutorial_en.catala-29"></a>
<a name="tutorial_en.catala-30"></a><span class="kd">declaration</span> <span class="kd">structure</span> <span class="nc">Article1</span><span class="o">:</span>
<a name="tutorial_en.catala-31"></a>  <span class="kd">data</span> <span class="nv">fixed_percentage</span> <span class="kd">content</span> <span class="kt">decimal</span>
<a name="tutorial_en.catala-32"></a>  <span class="kd">data</span> <span class="nv">income_tax</span> <span class="kd">content</span> <span class="kt">amount</span>
<a name="tutorial_en.catala-33"></a>*/
</pre></div>
</td></tr></table>
</div>

<p class='law-text'>Each of this declaration is a structure, containing one or more data fields. Structures are useful to group together data that goes together. Usually, you get one structure per concrete object on which the law applies (like the individual), but also one structure for each article that defines quantities (like the article 1). It is up to you to decide how to group the data together, but you should aim to optimize code readability.</p>

<p class='law-text'>Sometimes, the law gives an enumeration of different situations. These enumerations are modeled in Catala using an enumeration type, like:</p>

<div class='code-wrapper'>
<div class='filename'>tutorial_en.catala</div>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><a href="#tutorial_en.catala-40">40</a>
<a href="#tutorial_en.catala-41">41</a>
<a href="#tutorial_en.catala-42">42</a>
<a href="#tutorial_en.catala-43">43</a>
<a href="#tutorial_en.catala-44">44</a>
<a href="#tutorial_en.catala-45">45</a></pre></div></td><td class="code"><div class="highlight"><pre><span></span><a name="tutorial_en.catala-40"></a>/*
<a name="tutorial_en.catala-41"></a><span class="kd">declaration</span> <span class="kd">enumeration</span> <span class="nc">TaxCredit</span><span class="o">:</span>
<a name="tutorial_en.catala-42"></a>— <span class="nc">NoTaxCredit</span>
<a name="tutorial_en.catala-43"></a>— <span class="nc">ChildrenTaxCredit</span> <span class="kd">content</span> <span class="kt">integer</span><span class="c1"> # the integer corresponds</span>
<a name="tutorial_en.catala-44"></a><span class="c1">                                    # to the number of children</span>
<a name="tutorial_en.catala-45"></a>*/
</pre></div>
</td></tr></table>
</div>

<p class='law-text'>We've defined and typed the data that the program will manipulate. Now we have to define the logical context in which these data will evolve. This is done in Catala using "scopes". Scopes also have to be declared in metadata, so here we go:</p>

<div class='code-wrapper'>
<div class='filename'>tutorial_en.catala</div>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><a href="#tutorial_en.catala-51">51</a>
<a href="#tutorial_en.catala-52">52</a>
<a href="#tutorial_en.catala-53">53</a>
<a href="#tutorial_en.catala-54">54</a>
<a href="#tutorial_en.catala-55">55</a></pre></div></td><td class="code"><div class="highlight"><pre><span></span><a name="tutorial_en.catala-51"></a>/*
<a name="tutorial_en.catala-52"></a><span class="kd">declaration</span> <span class="kd">scope</span> <span class="nc">IncomeTaxComputation</span><span class="o">:</span>
<a name="tutorial_en.catala-53"></a>  <span class="kd">context</span> <span class="nv">individual</span> <span class="kd">content</span> <span class="nc">Individual</span>
<a name="tutorial_en.catala-54"></a>  <span class="kd">context</span> <span class="nv">article1</span> <span class="kd">content</span> <span class="nc">Article1</span>
<a name="tutorial_en.catala-55"></a>*/
</pre></div>
</td></tr></table>
</div>

<p class='law-text'>This scope declaration says that whenever we're in the scope "IncomeTaxComputation", then we have access to two elements in context, namely the individual's data and the data defined by article 1. We will be able to refer to the lowercase variables in our code, either to use them or to define them or one of their part.</p>

<p class='law-text'>We now have everything to annotate the contents of article 1, which is copied over below.</p>

<div class='article-container'>

<div class='article-title'><a href='#'>Article 1</a></div>

<p class='law-text'>The income tax for an individual is defined as a fixed percentage of the individual's income over a year.</p>

<div class='code-wrapper'>
<div class='filename'>tutorial_en.catala</div>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><a href="#tutorial_en.catala-64">64</a>
<a href="#tutorial_en.catala-65">65</a>
<a href="#tutorial_en.catala-66">66</a>
<a href="#tutorial_en.catala-67">67</a>
<a href="#tutorial_en.catala-68">68</a></pre></div></td><td class="code"><div class="highlight"><pre><span></span><a name="tutorial_en.catala-64"></a>/*
<a name="tutorial_en.catala-65"></a><span class="kd">scope</span> <span class="nc">IncomeTaxComputation</span><span class="o">:</span>
<a name="tutorial_en.catala-66"></a>  <span class="kd">definition</span> <span class="nv">article1</span><span class="o">.</span>income_tax <span class="kd">equals</span>
<a name="tutorial_en.catala-67"></a>    <span class="nv">invidual</span><span class="o">.</span>income × <span class="nv">article1</span><span class="o">.</span>fixed_percentage
<a name="tutorial_en.catala-68"></a>*/
</pre></div>
</td></tr></table>
</div>

<p class='law-text'>In the code, we are defining inside our scope the amount of the income tax according to the formula described in the article. When defining formulaes, you have access to all the usual arithmetic operators. But what is the value of that fixed percentage? Often, precise values are defined elsewhere in the legislative source. Here, let's suppose we have:</p>

<!-- Closing article div -->
</div>

<div class='article-container'>

<div class='article-title'><a href='#'>Article 2</a></div>

<p class='law-text'>The fixed percentage mentionned at article 1 is equal to 20 %.</p>

<div class='code-wrapper'>
<div class='filename'>tutorial_en.catala</div>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><a href="#tutorial_en.catala-74">74</a>
<a href="#tutorial_en.catala-75">75</a>
<a href="#tutorial_en.catala-76">76</a>
<a href="#tutorial_en.catala-77">77</a></pre></div></td><td class="code"><div class="highlight"><pre><span></span><a name="tutorial_en.catala-74"></a>/*
<a name="tutorial_en.catala-75"></a><span class="kd">scope</span> <span class="nc">IncomeTaxComputation</span><span class="o">:</span>
<a name="tutorial_en.catala-76"></a>  <span class="kd">definition</span> <span class="nv">article1</span><span class="o">.</span>fixed_percentage <span class="kd">equals</span> <span class="mi">20</span> <span class="o">%</span>
<a name="tutorial_en.catala-77"></a>*/
</pre></div>
</td></tr></table>
</div>

<p class='law-text'>You can see here that Catala allows definitions to be scattered throughout the annotation of the legislative text, so that each</p>

<p class='law-text'>definition is as close as possible to its location in the text.</p>

<!-- Closing article div -->
</div>

<h2 class='law-heading'>Conditional definitions</h2>

<p class='law-text'>So far so good, but now the legislative text introduces some trickyness. Let us suppose the third article says:</p>

<div class='article-container'>

<div class='article-title'><a href='#'>Article 3</a></div>

<p class='law-text'> If the individual is in charge of 2 or more children, then the fixed percentage mentionned at article 1 is equal to 15 %.</p>

<div class='code-wrapper'>
<div class='filename'>tutorial_en.catala</div>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><a href="#tutorial_en.catala-86">86</a>
<a href="#tutorial_en.catala-87">87</a>
<a href="#tutorial_en.catala-88">88</a></pre></div></td><td class="code"><div class="highlight"><pre><span></span><a name="tutorial_en.catala-86"></a>/*<span class="c1"></span>
<a name="tutorial_en.catala-87"></a><span class="c1"># How to redefine article1.fixed_percentage?</span>
<a name="tutorial_en.catala-88"></a>*/
</pre></div>
</td></tr></table>
</div>

<p class='law-text'>This article actually gives another definition for the fixed percentage, which was already defined in article 2. However, article 3 defines the percentage conditionnally to the individual having more than 2 children. Catala allows you precisely to redefine a variable under a condition:</p>

<div class='code-wrapper'>
<div class='filename'>tutorial_en.catala</div>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><a href="#tutorial_en.catala-93">93</a>
<a href="#tutorial_en.catala-94">94</a>
<a href="#tutorial_en.catala-95">95</a>
<a href="#tutorial_en.catala-96">96</a>
<a href="#tutorial_en.catala-97">97</a>
<a href="#tutorial_en.catala-98">98</a></pre></div></td><td class="code"><div class="highlight"><pre><span></span><a name="tutorial_en.catala-93"></a>/*
<a name="tutorial_en.catala-94"></a><span class="kd">scope</span> <span class="nc">IncomeTaxComputation</span><span class="o">:</span>
<a name="tutorial_en.catala-95"></a>  <span class="kd">definition</span> <span class="nv">article1</span><span class="o">.</span>fixed_percentage <span class="kd">under condition</span>
<a name="tutorial_en.catala-96"></a>    <span class="nv">individual</span><span class="o">.</span>number_of_children ≥ <span class="mi">2</span>
<a name="tutorial_en.catala-97"></a>  <span class="kd">consequence</span> <span class="kd">equals</span> <span class="mi">15</span> <span class="o">%</span>
<a name="tutorial_en.catala-98"></a>*/
</pre></div>
</td></tr></table>
</div>

<p class='law-text'>When the Catala program will execute, the right definition will be dynamically chosen by looking at which condition is true. A correctly drafted legislative source should always ensure that at most one condition is true at all times. However, if it is not the case, Catala will let you define a precedence on the conditions, which has to be justified by the law.</p>

<!-- Closing article div -->
</div>

<h2 class='law-heading'>Functions</h2>

<p class='law-text'>Catala lets you define functions anywhere in your data. Here's what it looks like in the metadata definition when we want to define a two-brackets tax computation:</p>

<div class='code-wrapper'>
<div class='filename'>tutorial_en.catala</div>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><a href="#tutorial_en.catala-107">107</a>
<a href="#tutorial_en.catala-108">108</a>
<a href="#tutorial_en.catala-109">109</a>
<a href="#tutorial_en.catala-110">110</a>
<a href="#tutorial_en.catala-111">111</a>
<a href="#tutorial_en.catala-112">112</a>
<a href="#tutorial_en.catala-113">113</a>
<a href="#tutorial_en.catala-114">114</a>
<a href="#tutorial_en.catala-115">115</a>
<a href="#tutorial_en.catala-116">116</a></pre></div></td><td class="code"><div class="highlight"><pre><span></span><a name="tutorial_en.catala-107"></a>/*
<a name="tutorial_en.catala-108"></a><span class="kd">declaration</span> <span class="kd">structure</span> <span class="nc">TwoBrackets</span><span class="o">:</span>
<a name="tutorial_en.catala-109"></a>  <span class="kd">data</span> <span class="nv">breakpoint</span> <span class="kd">content</span> <span class="kt">amount</span>
<a name="tutorial_en.catala-110"></a>  <span class="kd">data</span> <span class="nv">rate1</span> <span class="kd">content</span> <span class="kt">decimal</span>
<a name="tutorial_en.catala-111"></a>  <span class="kd">data</span> <span class="nv">rate2</span> <span class="kd">content</span> <span class="kt">decimal</span>
<a name="tutorial_en.catala-112"></a>
<a name="tutorial_en.catala-113"></a><span class="kd">declaration</span> <span class="kd">scope</span> <span class="nc">TwoBracketsTaxComputation</span> <span class="o">:</span>
<a name="tutorial_en.catala-114"></a>  <span class="kd">context</span> <span class="nv">brackets</span> <span class="kd">content</span> <span class="nc">TwoBrackets</span>
<a name="tutorial_en.catala-115"></a>  <span class="kd">context</span> <span class="nv">tax_formula</span> <span class="kd">content</span> <span class="kt">amount</span> <span class="kd">depends on</span> <span class="kt">amount</span>
<a name="tutorial_en.catala-116"></a>*/
</pre></div>
</td></tr></table>
</div>

<p class='law-text'>And in the code:</p>

<div class='article-container'>

<div class='article-title'><a href='#'>Article4</a></div>

<p class='law-text'> The tax amount for a two-brackets computation is equal to the amount of income in each bracket multiplied by the rate of each bracket.</p>

<div class='code-wrapper'>
<div class='filename'>tutorial_en.catala</div>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><a href="#tutorial_en.catala-123">123</a>
<a href="#tutorial_en.catala-124">124</a>
<a href="#tutorial_en.catala-125">125</a>
<a href="#tutorial_en.catala-126">126</a>
<a href="#tutorial_en.catala-127">127</a>
<a href="#tutorial_en.catala-128">128</a>
<a href="#tutorial_en.catala-129">129</a>
<a href="#tutorial_en.catala-130">130</a>
<a href="#tutorial_en.catala-131">131</a></pre></div></td><td class="code"><div class="highlight"><pre><span></span><a name="tutorial_en.catala-123"></a>/*
<a name="tutorial_en.catala-124"></a><span class="kd">scope</span> <span class="nc">TwoBracketsTaxComputation</span> <span class="o">:</span>
<a name="tutorial_en.catala-125"></a>  <span class="kd">definition</span> <span class="nv">tax</span> <span class="kr">of</span> <span class="nv">income</span> <span class="kd">equals</span>
<a name="tutorial_en.catala-126"></a>    <span class="kr">if</span> <span class="nv">income</span> ≤ <span class="nv">breakpoint</span> <span class="kr">then</span>
<a name="tutorial_en.catala-127"></a>      <span class="nv">income</span> × <span class="nv">rate1</span>
<a name="tutorial_en.catala-128"></a>    <span class="kr">else</span> <span class="o">(</span>
<a name="tutorial_en.catala-129"></a>      <span class="nv">breakpoint</span> × <span class="nv">rate1</span> <span class="o">+</span> <span class="o">(</span><span class="nv">income</span> <span class="o">-</span> <span class="nv">breakpoint</span><span class="o">)</span> × <span class="nv">rate2</span>
<a name="tutorial_en.catala-130"></a>    <span class="o">)</span>
<a name="tutorial_en.catala-131"></a>*/
</pre></div>
</td></tr></table>
</div>

<!-- Closing article div -->
</div>

<h2 class='law-heading'>Scope inclusion</h2>

<p class='law-text'>Now that we've defined our helper scope for computing a two-brackets tax, we want to use it in our main tax computation scope.</p>

<div class='article-container'>

<div class='article-title'><a href='#'>Article 5</a></div>

<p class='law-text'> For individuals whose income is greater than $100,000, the income tax of article 1 is computed with a two-brackets system.</p>

<div class='code-wrapper'>
<div class='filename'>tutorial_en.catala</div>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><a href="#tutorial_en.catala-138">138</a>
<a href="#tutorial_en.catala-139">139</a>
<a href="#tutorial_en.catala-140">140</a>
<a href="#tutorial_en.catala-141">141</a>
<a href="#tutorial_en.catala-142">142</a>
<a href="#tutorial_en.catala-143">143</a>
<a href="#tutorial_en.catala-144">144</a>
<a href="#tutorial_en.catala-145">145</a>
<a href="#tutorial_en.catala-146">146</a>
<a href="#tutorial_en.catala-147">147</a>
<a href="#tutorial_en.catala-148">148</a>
<a href="#tutorial_en.catala-149">149</a></pre></div></td><td class="code"><div class="highlight"><pre><span></span><a name="tutorial_en.catala-138"></a>/*
<a name="tutorial_en.catala-139"></a><span class="kd">declaration</span> <span class="kd">scope</span> <span class="nc">IncomeTaxComputation</span><span class="o">:</span><span class="c1"></span>
<a name="tutorial_en.catala-140"></a><span class="c1">  # The scope inclusion has to be added in the scope declaration</span>
<a name="tutorial_en.catala-141"></a>  <span class="kd">context</span> <span class="nv">two_brackets_for_rich</span> <span class="kd">scope</span> <span class="nc">TwoBracketsTaxComputation</span>
<a name="tutorial_en.catala-142"></a>
<a name="tutorial_en.catala-143"></a><span class="kd">scope</span> <span class="nc">IncomeTaxComputation</span> <span class="o">:</span>
<a name="tutorial_en.catala-144"></a>
<a name="tutorial_en.catala-145"></a>  <span class="kd">definition</span> <span class="nv">article1</span><span class="o">.</span>income_tax <span class="kd">under condition</span>
<a name="tutorial_en.catala-146"></a>    <span class="nv">individual</span><span class="o">.</span>income ≥ <span class="o">$</span><span class="mi">100,000</span>
<a name="tutorial_en.catala-147"></a>  <span class="kd">consequence</span> <span class="kd">equals</span>
<a name="tutorial_en.catala-148"></a>    <span class="nv">two_brackets_for_rich</span><span class="o">.</span>tax <span class="kr">of</span> <span class="nv">individual</span><span class="o">.</span>income
<a name="tutorial_en.catala-149"></a>*/
</pre></div>
</td></tr></table>
</div>

<p class='law-text'>Scope inclusion also comes with a syntactic sugar for quickly and conditionnaly</p>

<p class='law-text'>connecting context quantities :</p>

<div class='code-wrapper'>
<div class='filename'>tutorial_en.catala</div>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><a href="#tutorial_en.catala-155">155</a>
<a href="#tutorial_en.catala-156">156</a>
<a href="#tutorial_en.catala-157">157</a>
<a href="#tutorial_en.catala-158">158</a></pre></div></td><td class="code"><div class="highlight"><pre><span></span><a name="tutorial_en.catala-155"></a>/*
<a name="tutorial_en.catala-156"></a><span class="kd">declaration</span> <span class="kd">scope</span> <span class="nc">ExemptedOfTax</span><span class="o">:</span>
<a name="tutorial_en.catala-157"></a>  <span class="kd">context</span> <span class="nv">article1</span> <span class="kd">content</span> <span class="nc">Article1</span>
<a name="tutorial_en.catala-158"></a>*/
</pre></div>
</td></tr></table>
</div>

<!-- Closing article div -->
</div>

<div class='article-container'>

<div class='article-title'><a href='#'>Article 6</a></div>

<p class='law-text'>Individuals earning less than $10,000 are exempted of the income tax mentionned at article 1.</p>

<div class='code-wrapper'>
<div class='filename'>tutorial_en.catala</div>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><a href="#tutorial_en.catala-163">163</a>
<a href="#tutorial_en.catala-164">164</a>
<a href="#tutorial_en.catala-165">165</a>
<a href="#tutorial_en.catala-166">166</a>
<a href="#tutorial_en.catala-167">167</a>
<a href="#tutorial_en.catala-168">168</a>
<a href="#tutorial_en.catala-169">169</a>
<a href="#tutorial_en.catala-170">170</a>
<a href="#tutorial_en.catala-171">171</a>
<a href="#tutorial_en.catala-172">172</a>
<a href="#tutorial_en.catala-173">173</a>
<a href="#tutorial_en.catala-174">174</a>
<a href="#tutorial_en.catala-175">175</a>
<a href="#tutorial_en.catala-176">176</a></pre></div></td><td class="code"><div class="highlight"><pre><span></span><a name="tutorial_en.catala-163"></a>/*
<a name="tutorial_en.catala-164"></a><span class="kd">scope</span> <span class="nc">ExemptedOfTax</span> <span class="o">:</span>
<a name="tutorial_en.catala-165"></a>  <span class="kd">definition</span> <span class="nv">article1</span><span class="o">.</span>income_tax <span class="kd">equals</span> <span class="o">$</span><span class="mi">0</span>
<a name="tutorial_en.catala-166"></a>
<a name="tutorial_en.catala-167"></a><span class="kd">declaration</span> <span class="kd">scope</span> <span class="nc">IncomeTaxComputation</span><span class="o">:</span><span class="c1"></span>
<a name="tutorial_en.catala-168"></a><span class="c1">  # The scope inclusion has to be added in the scope declaration</span>
<a name="tutorial_en.catala-169"></a>  <span class="kd">context</span> <span class="nv">tax_exempt</span> <span class="kd">scope</span> <span class="nc">ExemptedOfTax</span>
<a name="tutorial_en.catala-170"></a>
<a name="tutorial_en.catala-171"></a><span class="kd">scope</span> <span class="nc">IncomeTaxComputation</span><span class="o">:</span>
<a name="tutorial_en.catala-172"></a>  <span class="kd">definition</span>  <span class="nv">article1</span><span class="o">.</span>income_tax <span class="kd">under condition</span>
<a name="tutorial_en.catala-173"></a>    <span class="nv">individual</span><span class="o">.</span>income ≤ <span class="o">$</span><span class="mi">10,000</span>
<a name="tutorial_en.catala-174"></a>  <span class="kd">consequence</span> <span class="kd">equals</span>
<a name="tutorial_en.catala-175"></a>    <span class="nv">tax_exempt</span><span class="o">.</span>article1.income_tax
<a name="tutorial_en.catala-176"></a>*/
</pre></div>
</td></tr></table>
</div>

<p class='law-text'>This snippet of code actually brings the definition of article1.income_tax of ExemptedOfTax into the IncomeTaxComputation scope, prefixing it with the "income under $10,000" condition.</p>